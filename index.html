<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>DnD Map Maker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- BOOTSTRAP CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <!-- FABRIC JS -->
    <script src="fabric.js"></script>
</head>
<body >
    <div class="row">
        <!-- menu -->
        <div class="col">
            <input id="img_upload" class="btn btn-primary" type="file" value="add img"  /> <br>
            <button>del</button> <br>
            <button>save map</button> <br>
            <button>upload map</button> <br>
        </div>
        <div class="col">
            <canvas id="canvas" width="500" height="500" style="border:1px solid #eee; margin-top: 10vh;"></canvas>
        </div>
        <div class="col"></div>
    </div>

    <script>
        let canvas = new fabric.Canvas('canvas');
       
        //setting up game board
        for(let i = canvas.width/10; i <= canvas.width; i += canvas.width/10)
        {
            let line = new fabric.Line([i,0,i,canvas.height],
            {
                stroke:"#000",
                selectable:false
            });
            canvas.add(line);
        }
        for(let i = canvas.height/10; i <= canvas.height; i += canvas.height/10)
        {
            console.log([0,i,0,canvas.width]);
            let line = new fabric.Line([0,i,canvas.width, i],
            {
                stroke:"#000",
                selectable:false
            });
            canvas.add(line);
        }

        var rect = new fabric.Rect({
            left: 100,
            top: 100,
            fill: '#0ff',
            width: 100,
            height: 100
        });
        canvas.add(rect);


        //upload images to canvas
        document.querySelector("#img_upload").onchange = (e) =>
        {
            let reader = new FileReader();
            reader.onload = (event) =>
            {
                let img = new Image();
                img.src = event.target.result;
                img.onload = () => 
                {
                    let image = new fabric.Image(img,
                    {
                        left:10,
                        top:10
                    });
                    canvas.add(image);
                    canvas.renderAll();
                };
            };
            reader.readAsDataURL(e.target.files[0]);
        };
    </script>
</body>
</html>